(function(C,g){typeof exports=="object"&&typeof module!="undefined"?module.exports=g():typeof define=="function"&&define.amd?define(g):(C=typeof globalThis!="undefined"?globalThis:C||self,C.Layouter=g())})(this,function(){"use strict";const C=(e,t)=>{const r={};return t==="width"?Object.keys(e).map(s=>({alias:s,width:e[s].width})).sort((s,n)=>s.width>n.width?1:n.width>s.width?-1:0).forEach((s,n)=>{r[s.alias]=n?e[s.alias][t]:0}):Object.keys(e).forEach(s=>{r[s]=e[s][t]}),r},g=({bridge:e,bp:t,insertionType:r,node:s})=>{let n=document.getElementById("layouter-"+t);if(!n){n=document.createElement("style"),n.appendChild(document.createTextNode(""));const i=s.parentNode;switch(r){case"before":i.insertBefore(n,s);break;case"after":s.nextSibling?i.insertBefore(n,s.nextSibling):i.appendChild(n);break;case"append":s.appendChild(n);break}n.id="layouter-"+t}let o;return e?o={method:n.sheet,node:n}:o={method:{insertRule:i=>{n.appendChild(document.createTextNode(i))},rules:[]},node:n},o},re=(e,t,r)=>{const s=r||{};return Object.keys(e).forEach(n=>{s[n]||(s[n]=g({bridge:t,bp:n,insertionType:"append",node:document.body}))}),s},ie=(e,t)=>{const r={};return Object.keys(t).forEach(s=>r[s]=e[s]),r},oe="1.2.1";let y={prefix:"",breakpoints:{xs:{width:360,cols:15},sm:{width:600,cols:25},md:{width:900,cols:31},lg:{width:1200,cols:41},xlg:{width:1536,cols:51}},bridge:!0,debug:!0},m;const L=(e,t,r)=>{const s=C(e,"width"),n=ie(e,s);return{sizes:s,cols:C(e,"cols"),scope:re(n,t,r),breakpoints:n}},F=(e={})=>(typeof window!="undefined"?y={...y,...window.layouterConfig,...e}:e&&(y={...y,...e}),m={...y,...L(y.breakpoints,y.bridge),styles:{},version:oe},m),ae=(e,t)=>{m.styles[e]=t},x=(e=!1)=>e?F():m,le=e=>(m={...m,...e},e.breakpoints&&(m={...m,...L(m.breakpoints,m.bridge,m.scope)}),m),v={cols:{set:"setCols",build:"buildCols",ruleCss:"width"},pad:{set:"setPad",build:"buildPad",ruleCss:"padding"},padt:{set:"setPadTop",build:"buildPadTop",ruleCss:"padding-top"},padr:{set:"setPadRight",build:"buildPadRight",ruleCss:"padding-right"},padb:{set:"setPadBottom",build:"buildPadBottom",ruleCss:"padding-bottom"},padl:{set:"setPadLeft",build:"buildPadLeft",ruleCss:"padding-left"},mar:{set:"setMar",build:"buildMar",ruleCss:"margin"},mart:{set:"setMarTop",build:"buildMarTop",ruleCss:"margin-top"},marr:{set:"setMarRight",build:"buildMarRight",ruleCss:"margin-right"},marb:{set:"setMarBottom",build:"buildMarBottom",ruleCss:"margin-bottom"},marl:{set:"setMarLeft",build:"buildMarLeft",ruleCss:"margin-left"},flex:{set:"setFlex",build:"buildFlex",ruleCss:"display: flex"},mxw:{set:"setMaxWidth",build:"buildMaxWidth",ruleCss:"max-width"},mxh:{set:"setMaxHeight",build:"buildMaxHeight",ruleCss:"max-height"},miw:{set:"setMinWidth",build:"buildMinWidth",ruleCss:"min-width"},mih:{set:"setMinHeight",build:"buildMinHeight",ruleCss:"min-height"},wdh:{set:"setWidth",build:"buildWidth",ruleCss:"width"},hgt:{set:"setHeight",build:"buildHeight",ruleCss:"height"}},H=e=>{const t={},r=e.attributes,s=Object.keys(v);return Array.prototype.forEach.call(r,n=>{s.includes(n.name)&&n.value!==""&&(t[n.name]=n.value.trim().split(" ").filter(o=>o).join(" "))}),t},O=e=>{let t,r=e,s=!1;const n=r.includes("@");if(n){const o=r.split("@");r=o[0],t=o[1]}else{const o=x();t=Object.keys(o.breakpoints)[0]}return e.includes("!")&&(s=!0,t=t.replace(/!/g,""),r=r.replace(/!/g,"")),{widthBp:n,numbers:r,breakPoints:t,important:s}},w=(e,t,r)=>{const s=new Error;return s.name=e,s.message=t,x().debug&&(console.error(s),r&&console.log(r)),s},W=(e,t)=>{const r=e*100/t;return(r-Math.floor(r)!==0?r.toFixed(3):r)+"%"},ce=e=>{const t=e.replace(/!/g,""),r=t.indexOf("@"),s=x(),n=s.scope,o=s.bridge;if(r===-1){const l=Object.keys(s.breakpoints)[0];return n[l]}const i=t.substring(r+1);if(!i.includes("-"))return n[i];if(i.substring(0,1)==="-"){if(n[i])return n[i];const l=i.substring(1);return n[i]=g({bridge:o,bp:i,insertionType:"before",node:n[l].node}),n[i]}if(n[i])return n[i];const a=i.split("-")[0];return n[i]=g({bridge:o,bp:i,insertionType:"after",node:n[a].node}),n[i]},R=e=>{const t=x();for(const r in e)if(!t.styles[r]){const s=ce(r),n=e[r],o=s.method.rules;s.method.insertRule(n,o?o.length:0),ae(r,n)}},k={jc:"justify-content",ai:"align-items",ce:"center",fs:"flex-start",fe:"flex-end",sb:"space-between",sa:"space-around",fw:"flex-wrap",nw:"nowrap",w:"wrap",wr:"wrap-reverse",fd:"flex-direction",r:"row",rr:"row-reverse",co:"column",cor:"column-reverse",fg:"flex-grow",fh:"flex-shrink",as:"align-self",or:"order",au:"auto",st:"stretch",bl:"baseline",in:"initial",ih:"inherit"},D=["fg","fh","or"],ue=e=>"0\xAF"+e.replace("%",""),de=(e,t)=>{const r=x(),s=r.sizes,n=r.prefix,o=v[e].ruleCss,i={};return Object.keys(t).forEach(a=>{const l=t[a].name;let p=l;l.includes("%")&&(p=l.replace(l,ue(l))),p=(n?n+"-":"")+e+"-"+p.replace(/\//g,"\\/").replace(/:/g,"\\:").replace("@","\\@").split(".").join("_");let b;if(e==="flex"){b=t[a].value;const P=l.includes("!")?";display:flex !important;":";display:flex;",E=["as"].concat(D).filter(B=>l.includes(B+":"));E.length?E.length+1!==l.split(":").length&&(b+=P):b+=P}else b=o+":"+t[a].value;let u="@media screen and ",h=!1;if(!a.includes("-"))s[a]?u+="(min-width: "+s[a]+"px)":(u="."+p.replace(/!/g,"\\!")+"{"+b+"}",h=!0);else{const P=a.split("-"),E=P[0];E&&(u+="(min-width: "+s[E]+"px) and ");const B=P[1];u+="(max-width: "+(s[B]-1)+"px)"}h||(u+="{."+p.replace(/!/g,"\\!")+"{"+b+"}}"),i[p]=u}),i},fe=[["/",""],["\\","/"],["/:",":"],["\\:",":"],["\\@","@"],["/@","@"]],pe=e=>{const t={};for(const r in e){let s=r;fe.forEach(n=>{s=s.split(n[0]).join(n[1])}),t[s]=e[r]}return t},A=e=>{const t=de(e.type,e.bps);return e.deep&&R(t),pe(t)},T=(e,t=!1)=>{let r,s;const n={},o=x();let i,a,l;const p=Object.keys(o.breakpoints)[0];let c=!1;for(const b of e.split(" ")){let u=b;if(i=u,l=O(u),s=l.breakPoints,u=l.numbers,u.includes("/")){const h=u.split("/");r=[Number(h[0]),Number(h[1])]}else if(l.widthBp)if(s.includes("-")){c=w("SyntaxError","You can't determine a 'until breakpoint' when use the explicit columns max: "+e);break}else r=[Number(u),o.cols[s]];else r=[Number(u),o.cols[p]];a=W(r[0],r[1]),l.important&&(a+=" !important"),n[s]={name:i,value:a}}return c||A({type:"cols",bps:n,deep:t})},S=(e,t=!1)=>{const r={};let s=!1;const n=x(),o=Object.keys(n.breakpoints)[0];for(const i of e.split(" ")){let a,l=i;const p=O(i),c=p.breakPoints,b=p.numbers.split(":"),u=b[0],h=b[1];if(D.includes(u))a=k[u]+":"+h;else{if(!k[u]){s=w("Non-existent Alias","Don't exists the alias '"+u+"' in Flex vault.");break}if(!k[h]){s=w("Non-existent Alias","Don't exists the alias '"+h+"' in Flex vault.");break}a=k[u]+":"+k[h]}if(p.important&&(a+=" !important"),!r[c])r[c]={name:l,value:a};else{l.includes("@")&&(l=l.split("@")[0]);const P=c===o?"":"@"+c;r[c].name=r[c].name.split("@")[0]+"-"+l+P,r[c].value+=";"+a}}return s||A({type:"flex",bps:r,deep:t})},be=["%","rem","em","ex","vw","vh"],me=e=>{let t;return e.includes("/")?(t=e.split("/"),t=W(parseFloat(t[0]),parseFloat(t[1]))):e==="auto"?t="auto":be.filter(s=>e.includes(s)).length?t=e:t=e==="0"?e:e+"px",t},d=(e,t,r=!1)=>{const s={};return e.split(" ").forEach(n=>{const o=O(n),i=o.breakPoints;let a=o.numbers.split("-").map(l=>me(l)).join(" ");o.important&&(a+=" !important"),s[i]={name:n,value:a}}),A({type:t,bps:s,deep:r})},V=(e,t=!1)=>d(e,"pad",t),I=(e,t=!1)=>d(e,"padt",t),z=(e,t=!1)=>d(e,"padr",t),U=(e,t=!1)=>d(e,"padb",t),q=(e,t=!1)=>d(e,"padl",t),Y=(e,t=!1)=>d(e,"mar",t),_=(e,t=!1)=>d(e,"mart",t),$=(e,t=!1)=>d(e,"marr",t),G=(e,t=!1)=>d(e,"marb",t),J=(e,t=!1)=>d(e,"marl",t),K=(e,t=!1)=>d(e,"mxw",t),Q=(e,t=!1)=>d(e,"mxh",t),X=(e,t=!1)=>d(e,"miw",t),Z=(e,t=!1)=>d(e,"mih",t),N=(e,t=!1)=>d(e,"hgt",t),ee=(e,t=!1)=>d(e,"wdh",t),he={buildCols:T,buildFlex:S,buildPad:V,buildPadTop:I,buildPadRight:z,buildPadBottom:U,buildPadLeft:q,buildMar:Y,buildMarTop:_,buildMarRight:$,buildMarBottom:G,buildMarLeft:J,buildMaxWidth:K,buildMaxHeight:Q,buildMinWidth:X,buildMinHeight:Z,buildHeight:N,buildWidth:ee},te=(e,t=!1)=>{const r={};let s=!1;for(const n in e){const o=v[n],i=he[o.build](e[n],t);if(i instanceof Error){s=i;break}else r[n]=i}return s||r},M=(e,t,r)=>new Promise(s=>{const n=t.split(" ");let o=n;if(!r&&(o=n.filter(a=>!e.classList.contains(a)),!o.length)){s();return}const i=new MutationObserver(a=>{const p=a[0].target.className.split(" ");n.every(b=>p.includes(b))&&(i.disconnect(),s())});if(i.observe(e,{childList:!1,subtree:!1,attributes:!0,attributeFilter:["class"],characterData:!1}),r)e.className=t;else{const a=e.hasAttribute("class")?" ":"";e.className+=a+o.join(" ")}}),se=(e,t)=>new Promise(r=>{if(!e.hasAttribute(t)){r();return}const s=new MutationObserver(()=>{s.disconnect(),r()});s.observe(e,{childList:!1,subtree:!1,attributes:!0,attributeFilter:[t],characterData:!1}),e.removeAttribute(t)}),ge=(e,t)=>new Promise(r=>{const s=t.map(n=>se(e,n));Promise.all(s).then(()=>r())}),j=(e,t)=>new Promise(r=>{Array.isArray(t)?ge(e,t).then(r):se(e,t).then(r)}),ye=(e,t)=>new Promise((r,s)=>{const n=t||H(e),o=Object.keys(n);if(!o.length){const c=w("Parameter Missing","don't exists any parameter to process",e);s(c);return}const i={};for(const c in n)i[c]=n[c];const a=te(i,!0);if(a instanceof Error){s(a);return}const l=a,p=Object.keys(l).map(c=>Object.keys(l[c])).flat().join(" ");j(e,o).then(()=>M(e,p)).then(()=>{r();const c=new CustomEvent("layout:ready");e.dispatchEvent(c)})}),xe=(e,t)=>new Promise((r,s)=>{const n=t||e.getAttribute("flex");if(!n){const a=w("Empty",'The value of the directive "flex" is empty',e);s(a);return}const o=S(n,!0);if(o instanceof Error){s(o);return}const i=Object.keys(o).join(" ");j(e,"flex").then(()=>M(e,i)).then(()=>{r();const a=new CustomEvent("layout:ready");e.dispatchEvent(a)})}),we=(e,t)=>new Promise((r,s)=>{const n=t||e.getAttribute("cols");if(!n){const a=w("Empty","The value of the directive 'cols' is empty",e);s(a);return}const o=T(n,!0);if(o instanceof Error){s(o);return}const i=Object.keys(o).join(" ");j(e,"cols").then(()=>M(e,i)).then(()=>{r();const a=new CustomEvent("layout:ready");e.dispatchEvent(a)})}),f=(e,t,r)=>new Promise((s,n)=>{const o=r||e.getAttribute(t);if(!o){const l=w("Empty",'The value of the directive "'+t+'" is empty',e);n(l);return}const i=d(o,t,!0),a=Object.keys(i).join(" ");j(e,t).then(()=>M(e,a)).then(()=>{s();const l=new CustomEvent("layout:ready");e.dispatchEvent(l)})}),Pe=(e,t)=>f(e,"hgt",t),Ce=(e,t)=>f(e,"marb",t),ve=(e,t)=>f(e,"marl",t),ke=(e,t)=>f(e,"marr",t),Me=(e,t)=>f(e,"mar",t),je=(e,t)=>f(e,"mart",t),Ee=(e,t)=>f(e,"mxw",t),Oe=(e,t)=>f(e,"mih",t),Ae=(e,t)=>f(e,"miw",t),Te=(e,t)=>f(e,"padb",t),Se=(e,t)=>f(e,"padl",t),Be=(e,t)=>f(e,"padr",t),Le=(e,t)=>f(e,"pad",t),Fe=(e,t)=>f(e,"padt",t),He=(e,t)=>f(e,"wdh",t),We=(e,t)=>f(e,"mxh",t),Re=e=>new Promise(t=>{const r=Object.keys(v),s=[];if(e.className.split(" ").filter(n=>{if(n.length<4)return s.push(n),!1;const o=n.length>=5?5:4;let i=n.substring(0,o);const a=i.split("").indexOf("-");return a===-1?(s.push(n),!1):(i=i.substring(0,a),r.includes(i)?!0:(s.push(n),!1))}),s.length){const n=s.join(" ");M(e,n,!0).then(()=>{t()})}else j(e,"class").then(()=>{t()})}),De=e=>new Promise(t=>{const s=Object.keys(v).map(a=>`[${a}]`).join(", "),n=document.querySelectorAll(s),o=new Set;Array.prototype.forEach.call(n,a=>{o.add(a)});const i=[];o.forEach(a=>{i.push(e.set(a))}),Promise.all(i).then(t)}),Ve=e=>{const t=Object.keys(v),r=new MutationObserver(n=>{for(const o of n)if(o.type==="childList"){if(!o.addedNodes.length)continue;o.addedNodes.forEach(i=>{if(i instanceof HTMLElement){const a=e.getParameters(i);Object.keys(a).length&&e.set(i,a)}})}else if(o.type==="attributes"){const i=o.target;if(i instanceof HTMLElement){const a=e.getParameters(i);Object.keys(a).length&&e.set(i,a)}}}),s={childList:!0,subtree:!0,attributes:!0,attributeFilter:t,characterData:!1};r.observe(document.body,s)},ne=(e={})=>{const r={...F(e),getParameters:H,updateConfig:le,insertRules:R,build:te,buildCols:T,buildFlex:S,buildPad:V,buildPadTop:I,buildPadRight:z,buildPadBottom:U,buildPadLeft:q,buildMar:Y,buildMarTop:_,buildMarRight:$,buildMarBottom:G,buildMarLeft:J,buildMaxWidth:K,buildMaxHeight:Q,buildMinWidth:X,buildMinHeight:Z,buildHeight:N,buildWidth:ee,set:ye,setCols:we,setFlex:xe,setMar:Me,setMarTop:je,setMarRight:ke,setMarBottom:Ce,setMarLeft:ve,setPad:Le,setPadTop:Fe,setPadRight:Be,setPadBottom:Te,setPadLeft:Se,setWidth:He,setMinWidth:Ae,setMaxWidth:Ee,setHeight:Pe,setMinHeight:Oe,setMaxHeight:We,reset:Re};return De(r).then(()=>{r.ready&&r.ready(r),Ve(r)}),r};return typeof window!="undefined"&&typeof exports=="undefined"&&(window.layouter=ne()),ne});
//# sourceMappingURL=layouter.umd.js.map
